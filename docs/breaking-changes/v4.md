# Breaking Changes for v4

## Container Scan Action

### Input Changes

- Removed `lw-account-name` input
- Removed `lw-access-token` input
- Removed `checkout-repo` input
- Removed `MAX_MIND_USER` input
- Removed `MAX_MIND_LICENSE_KEY` input
- Removed `vfunction-file` input

- Added `wiz-client-id` (required): Wiz Client ID for SA authentication
- Added `wiz-client-secret` (required): Wiz Client Secret for SA authentication
- Added `container-setup-commands`: Commands to set up the container environment
- Added `container-setup-env`: Environment variables for container setup as key-value pairs
- Added `s3-bucket-name`: S3 bucket name for caching Wiz CLI binary
- Added `s3-bucket-region`: S3 bucket region for caching (default: `us-east-1`)
- Added `wiz-cli-version`: Specific Wiz CLI version to download (default: `latest`)

### Output Changes

- Removed all previous outputs related to Lacework scanning

- Added `stdout`: Complete output for Wiz CLI scan
- Added `has_findings`: Whether scan found any issues
- Added `scan_status`: Status of scan (success/failure)
- Added `vulnerabilities`: Summary of vulnerability counts
- Added `critical_count`, `high_count`, `medium_count`, `low_count`: Individual severity counts
- Added `scan_url`: URL to scan report
- Added `image-id`, `image-size`, `image-with-tag`: Docker image metadata
- Added `cache-hit`: Whether S3 cache was hit

### Workflow Modifications

- Replaced Lacework scaner with Wiz CLI scanner
- Changed from Lacework tokens to Wiz SA credentials
- Added Wiz CLI download and S3 caching capability
- Replaced hardcoded environment variables with generic `container-setup-env` input

### Migration Guide

1. Replace `lw-account-name` and `lw-access-token` with `wiz-client-id` and `wiz-client-secret`
2. Remove `MAX_MIND_USER`, `MAX_MIND_LICENSE_KEY`, `vfunction-file`, `checkout-repo`
3. Replace hardcoded env vars with `container-setup-env` input
4. All previous Lacework outputs are replaced with new Wiz outputs
5. Ensure `WIZ_CLIENT_ID` and `WIZ_CLIENT_SECRET` secrets are configured
